<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <title>Easy Lawyer</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <style>
    * {
      box-sizing: border-box;
      font-family: system-ui, -apple-system, BlinkMacSystemFont;
    }

    body {
      margin: 0;
      padding: 0;
      min-height: 100vh;
      display: flex;
      justify-content: center;
      align-items: center;
      background: #f3f4f6;
      transition: background .2s, color .2s;
    }

    .card {
      width: 100%;
      max-width: 520px;
      background: #fff;
      padding: 32px 36px;
      border-radius: 24px;
      box-shadow: 0 22px 60px rgba(0,0,0,0.12);
    }

    /* ---------- CABEÇALHO ---------- */

    .header {
      width: 100%;
      display: flex;
      justify-content: center; /* Centro */
      align-items: center;
      margin-bottom: 18px;
      position: relative;
    }

    .logo {
      font-size: 2rem;
      font-weight: 800;
      text-align: center;
      color: #111827;
    }

    /* Toggle alinhado à direita */
    .toggle-wrapper {
      position: absolute;
      right: 0;
      top: 0;
    }

    /* ---------- TOGGLE PROFISSIONAL ---------- */

    .toggle-container {
      width: 130px;
      height: 38px;
      background: #e5e7eb;
      border-radius: 40px;
      padding: 4px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      position: relative;
      box-shadow:
        inset 3px 3px 6px rgba(255,255,255,0.9),
        inset -3px -3px 6px rgba(0,0,0,0.08);
      cursor: pointer;
      user-select: none;
    }

    .toggle-label {
      flex: 1;
      text-align: center;
      font-size: 0.75rem;
      font-weight: 700;
      color: #6b7280;
      z-index: 2;
      pointer-events: none;
    }

    .toggle-thumb {
      position: absolute;
      top: 4px;
      left: 4px;
      width: 60px;
      height: 30px;
      background: white;
      border-radius: 40px;
      box-shadow:
        0 6px 14px rgba(0,0,0,0.25),
        inset 2px 2px 5px rgba(255,255,255,0.85);
      display: flex;
      justify-content: center;
      align-items: center;
      font-size: 0.9rem;
      transition: left .25s ease, background .25s ease, color .25s ease;
      z-index: 1;
      color: #444;
    }

    /* ---------------- FORM ---------------- */

    label {
      font-size: 0.9rem;
      font-weight: 600;
      color: #374151;
    }

    input, select, textarea {
      width: 100%;
      margin-top: 4px;
      padding: 12px 14px;
      border-radius: 10px;
      border: 1px solid #d1d5db;
      background: #f9fafb;
      font-size: 0.95rem;
    }

    textarea {
      min-height: 110px;
      resize: vertical;
    }

    .btn {
      width: 100%;
      margin-top: 14px;
      padding: 14px;
      font-size: 1.05rem;
      font-weight: 700;
      border: none;
      border-radius: 14px;
      color: white;
      background: linear-gradient(135deg, #2563eb, #1d4ed8);
      cursor: pointer;
      box-shadow: 0 10px 22px rgba(37,99,235,0.35);
    }

    .status {
      margin-top: 12px;
      font-size: 0.9rem;
      min-height: 1.3rem;
    }

    .success { color: #15803d; }
    .error { color: #b91c1c; }

    /* -------- DARK MODE -------- */

    body.dark {
      background: #0f172a;
      color: #e2e8f0;
    }

    body.dark .card {
      background: #0b1120;
      box-shadow: 0 22px 60px rgba(0,0,0,0.6);
    }

    body.dark .logo { color: #f8fafc; }
    body.dark label { color: #e2e8f0; }

    body.dark input,
    body.dark select,
    body.dark textarea {
      background: #0f172a;
      border-color: #475569;
      color: #e2e8f0;
    }

    body.dark .toggle-container {
      background: #1e293b;
      box-shadow:
        inset 0 0 6px rgba(255,255,255,0.15),
        inset -3px -3px 6px rgba(0,0,0,0.6);
    }

    /* ✔ GLOW BRANCO (VISIBILIDADE PERFEITA NO DARK) */
    body.dark .toggle-thumb {
      background: #1e293b;
      color: #f1f5f9;
      box-shadow:
        inset 0 0 6px rgba(255,255,255,0.38),
        inset 2px 2px 5px rgba(255,255,255,0.18),
        0 6px 14px rgba(0,0,0,0.65);
      border: 1px solid rgba(255,255,255,0.22);
    }
  </style>

</head>
<body>

  <div class="card">

    <!-- HEADER COM LOGO CENTRALIZADA E TOGGLE À DIREITA -->
    <div class="header">

      <div class="toggle-wrapper">
        <div id="themeToggle" class="toggle-container">
          <div class="toggle-label">LIGHT</div>
          <div class="toggle-label">DARK</div>
          <div id="thumb" class="toggle-thumb">LIGHT</div>
        </div>
      </div>

      <div class="logo">Easy Lawyer</div>
    </div>

    <p style="margin-bottom: 18px; color:#6b7280;">
      Conte rapidamente seu problema e nós encaminharemos para um advogado.
    </p>

    <form id="form">

      <label>Seu nome completo</label>
      <input name="name" required placeholder="Ex: Júlio César Crispim Muniz">

      <br><br>

      <label>Telefone ou e-mail para contato</label>
      <input name="contact" required placeholder="(86) 9 9999-9999 ou email@exemplo.com">

      <br><br>

      <label>Área do problema</label>
      <select name="area" required>
        <option value="">Selecione...</option>
        <option>Previdenciário</option>
        <option>Trabalhista</option>
        <option>Cível</option>
        <option>Criminal</option>
        <option>Consumidor</option>
      </select>

      <br><br>

      <label>Explique rapidamente sua situação</label>
      <textarea name="summary" required></textarea>

      <button class="btn">Enviar para um advogado</button>

      <div id="status" class="status"></div>
    </form>
  </div>


  <script>
    /* =========================
       TOGGLE (LIGHT / DARK)
    ========================== */

    const toggle = document.getElementById('themeToggle');
    const thumb  = document.getElementById('thumb');

    function applyMode(mode){
      if(mode === 'dark'){
        document.body.classList.add('dark');
        thumb.style.left = "66px";
        thumb.textContent = "DARK";
      } else {
        document.body.classList.remove('dark');
        thumb.style.left = "4px";
        thumb.textContent = "LIGHT";
      }
    }

    let saved = localStorage.getItem("theme") || "light";
    applyMode(saved);

    toggle.onclick = () => {
      saved = saved === "light" ? "dark" : "light";
      localStorage.setItem("theme", saved);
      applyMode(saved);
    };

    /* =========================
       FORM / ENVIO
    ========================== */

    const form = document.getElementById('form');
    const statusDiv = document.getElementById('status');

    form.onsubmit = async (e) => {
      e.preventDefault();
      statusDiv.textContent = "";

      const data = Object.fromEntries(new FormData(form));

      const r = await fetch("/api/leads", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify(data)
      });

      const res = await r.json();

      if(!r.ok){
        statusDiv.textContent = "Erro: " + (res.error || "tente novamente");
        statusDiv.className = "status error";
        return;
      }

      statusDiv.textContent =
        "E-mail enviado com sucesso! Um advogado especialista entrará em contato em breve. Obrigado por escolher a Easy Lawyer!";
      statusDiv.className = "status success";

      form.reset();
    };
  </script>

</body>
</html>
