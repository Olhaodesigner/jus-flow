<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <title>Easy Lawyer</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <style>
    * {
      box-sizing: border-box;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI";
    }

    body {
      margin: 0;
      padding: 0;
      min-height: 100vh;
      display: flex;
      justify-content: center;
      align-items: center;
      background: #f3f4f6;
      transition: background .25s ease, color .25s ease;
    }

    .card {
      width: 100%;
      max-width: 520px;
      background: #fff;
      padding: 32px 36px;
      border-radius: 24px;
      box-shadow: 0 22px 60px rgba(0,0,0,0.12);
      position: relative;
    }

    /* ---------- HEADER ---------- */

    .header {
      position: relative;
      width: 100%;
      margin-bottom: 18px;
      text-align: center;
    }

    .logo {
      font-size: 2.2rem;
      font-weight: 800;
      color: #111827;
    }

    /* ---------- TOGGLE (FINAL AJUSTADO) ---------- */

    .toggle-wrapper {
      position: absolute;
      right: -15px;   /* afastado da logo */
      top: 8px;       /* alinhado horizontalmente */
    }

    .toggle-container {
      width: 135px;
      height: 42px;
      background: #e5e7eb;
      border-radius: 40px;
      padding: 5px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      position: relative;
      cursor: pointer;

      /* Neomorfismo suave */
      box-shadow:
        inset 2px 2px 4px rgba(255,255,255,0.9),
        inset -3px -3px 6px rgba(0,0,0,0.10);
    }

    .toggle-label {
      flex: 1;
      text-align: center;
      font-size: 0.75rem;
      font-weight: 700;
      transition: opacity .25s ease;
      color: #6b7280;
      opacity: .35; /* desativado */
      pointer-events: none;
      z-index: 2;
    }

    .toggle-label.active {
      opacity: 1;
      color: #374151;
    }

    .toggle-thumb {
      position: absolute;
      top: 6px;
      left: 6px;
      width: 62px;
      height: 30px;
      border-radius: 40px;
      font-size: 0.75rem;
      font-weight: 700;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: left .23s ease, background .23s ease, color .23s ease;

      /* Sombra bonita somente no botão */
      background: #fff;
      color: #374151;
      box-shadow:
        0 6px 12px rgba(0,0,0,0.18),
        inset 2px 2px 4px rgba(255,255,255,0.95);
    }

    /* ---------- DARK MODE ---------- */

    body.dark {
      background: #0f172a;
      color: #e2e8f0;
    }

    body.dark .card {
      background: #0b1120;
      box-shadow: 0 22px 60px rgba(0,0,0,0.55);
    }

    body.dark .logo {
      color: #f8fafc;
    }

    body.dark label {
      color: #e2e8f0;
    }

    body.dark .toggle-container {
      background: #1e2533;
      box-shadow:
        inset 0 0 4px rgba(255,255,255,0.12),
        inset -2px -2px 4px rgba(0,0,0,0.65);
    }

    /* Glow branco: botão visível no dark sem poluir */
    body.dark .toggle-thumb {
      background: #0f172a;
      color: #f1f5f9;
      box-shadow:
        inset 0 0 6px rgba(255,255,255,0.38),
        0 6px 14px rgba(0,0,0,0.60),
        inset 2px 2px 5px rgba(255,255,255,0.18);
      border: 1px solid rgba(255,255,255,0.22);
    }

    /* ---------- FORM ---------- */

    label {
      font-weight: 600;
      font-size: 0.95rem;
    }

    input, select, textarea {
      width: 100%;
      padding: 12px 14px;
      border-radius: 10px;
      border: 1px solid #d1d5db;
      background: #f9fafb;
      margin-top: 6px;
      font-size: 0.95rem;
    }

    textarea {
      min-height: 110px;
      resize: vertical;
    }

    .btn {
      width: 100%;
      margin-top: 16px;
      padding: 14px;
      font-size: 1.05rem;
      font-weight: 700;
      border-radius: 14px;
      border: none;
      cursor: pointer;
      color: white;
      background: linear-gradient(135deg, #2563eb, #1d4ed8);
      box-shadow: 0 10px 22px rgba(37,99,235,0.35);
    }

    .status {
      margin-top: 12px;
      font-size: 0.9rem;
      min-height: 1.3rem;
    }

    .success { color: #15803d; }
    .error { color: #b91c1c; }
  </style>
</head>

<body>

  <div class="card">

    <div class="header">
      <div class="logo">Easy Lawyer</div>

      <!-- TOGGLE -->
      <div class="toggle-wrapper">
        <div id="themeToggle" class="toggle-container">
          <div id="labelLight" class="toggle-label active">LIGHT</div>
          <div id="labelDark" class="toggle-label">DARK</div>

          <div id="thumb" class="toggle-thumb">LIGHT</div>
        </div>
      </div>
    </div>

    <p style="margin-bottom: 18px; color:#6b7280;">
      Conte rapidamente seu problema e nós encaminharemos para um advogado.
    </p>

    <form id="form">
      <label>Seu nome completo</label>
      <input name="name" required placeholder="Ex: Júlio César Crispim Muniz">

      <br><br>

      <label>Telefone ou e-mail para contato</label>
      <input name="contact" required placeholder="(86) 9 9999-9999 ou email@exemplo.com">

      <br><br>

      <label>Área do problema</label>
      <select name="area" required>
        <option value="">Selecione...</option>
        <option>Previdenciário</option>
        <option>Trabalhista</option>
        <option>Cível</option>
        <option>Criminal</option>
        <option>Consumidor</option>
      </select>

      <br><br>

      <label>Explique rapidamente sua situação</label>
      <textarea name="summary" required></textarea>

      <button class="btn">Enviar para um advogado</button>

      <div id="status" class="status"></div>
    </form>
  </div>

  <script>
    /* ==============================
       TOGGLE - LÓGICA FINAL
    ============================== */

    const toggle = document.getElementById("themeToggle");
    const thumb = document.getElementById("thumb");
    const labelLight = document.getElementById("labelLight");
    const labelDark = document.getElementById("labelDark");

    function apply(mode) {
      if (mode === "dark") {
        document.body.classList.add("dark");
        thumb.style.left = "67px";
        thumb.textContent = "DARK";

        labelLight.classList.remove("active");
        labelDark.classList.add("active");

      } else {
        document.body.classList.remove("dark");
        thumb.style.left = "6px";
        thumb.textContent = "LIGHT";

        labelDark.classList.remove("active");
        labelLight.classList.add("active");
      }
    }

    let current = localStorage.getItem("theme") || "light";
    apply(current);

    toggle.onclick = () => {
      current = current === "light" ? "dark" : "light";
      localStorage.setItem("theme", current);
      apply(current);
    };

    /* ==============================
       FORM
    ============================== */

    const form = document.getElementById("form");
    const statusDiv = document.getElementById("status");

    form.onsubmit = async (e) => {
      e.preventDefault();

      const data = Object.fromEntries(new FormData(form));

      const r = await fetch("/api/leads", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify(data)
      });

      const res = await r.json();

      if (!r.ok) {
        statusDiv.textContent = "Erro: " + (res.error || "Tente novamente");
        statusDiv.className = "status error";
        return;
      }

      statusDiv.textContent =
        "E-mail enviado com sucesso! Um advogado especialista entrará em contato em breve. Obrigado por escolher a Easy Lawyer!";
      statusDiv.className = "status success";

      form.reset();
    };
  </script>

</body>
</html>
