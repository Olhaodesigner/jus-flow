<!DOCTYPE html>
<html lang="pt-BR">
  <head>
    <meta charset="UTF-8" />
    <title>Brito Vilarinho Advocacia</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <style>
      body {
        margin: 0;
        padding: 0;
        background: #0f172a;
        font-family: Arial, sans-serif;
        color: white;
      }

      .container {
        max-width: 960px;
        margin: auto;
        padding: 20px;
      }

      .header {
        display: flex;
        align-items: center;
        gap: 12px;
        margin-bottom: 20px;
      }

      .header img {
        width: 42px;
        height: 42px;
        border-radius: 50%;
      }

      .chat-card {
        background: #1e293b;
        padding: 20px;
        border-radius: 12px;
        border: 1px solid #334155;
      }

      input,
      textarea {
        width: 100%;
        margin-top: 8px;
        margin-bottom: 14px;
        padding: 10px;
        border-radius: 8px;
        border: 1px solid #475569;
        background: #0f172a;
        color: white;
      }

      button {
        width: 100%;
        padding: 12px;
        border: none;
        border-radius: 8px;
        background: #4f46e5;
        color: white;
        font-weight: bold;
        cursor: pointer;
      }

      button:hover {
        background: #4338ca;
      }
    </style>
  </head>

  <body>
    <div class="container">
      <!-- HEADER COM LOGO NOVA -->
      <div class="header">
        <img
          src="https://raw.githubusercontent.com/Olhaodesigner/jus-flow/8ea2321517be9f138f002dea1d23a5abc8db8c92/logo%20escritorio.png"
          alt="Brito Vilarinho Advocacia"
        />
        <div>
          <div style="font-weight: bold; font-size: 16px">
            Brito Vilarinho
          </div>
          <div style="font-size: 13px; color: #cbd5e1">Advocacia</div>
        </div>
      </div>

      <!-- CARD DO CHAT -->
      <div class="chat-card">
        <div style="display: flex; align-items: center; gap: 10px">
          <img
            src="https://raw.githubusercontent.com/Olhaodesigner/jus-flow/8ea2321517be9f138f002dea1d23a5abc8db8c92/logo%20escritorio.png"
            width="34"
            height="34"
            style="border-radius: 50%"
          />
          <div>
            <div style="font-size: 13px; font-weight: bold">
              Brito Vilarinho
            </div>
            <div style="font-size: 11px; color: #cbd5e1">Advocacia</div>
          </div>
        </div>

        <!-- FORMULÁRIO -->
        <form id="leadForm" style="margin-top: 15px">
          <input type="text" id="name" placeholder="Nome completo" required />

          <input type="tel" id="phone" placeholder="Telefone / WhatsApp" required />

          <input type="email" id="email" placeholder="E-mail (opcional)" />

          <input
            type="text"
            id="area"
            placeholder="Área aproximada (ex: previdenciário)"
            required
          />

          <textarea
            id="summary"
            placeholder="Descreva seu caso com suas palavras..."
            required
          ></textarea>

          <!-- BOTÃO ALTERADO -->
          <button type="submit">Enviar para o advogado</button>

          <p id="status" style="margin-top: 10px; font-size: 12px"></p>
        </form>
      </div>
    </div>

    <script>
      const form = document.getElementById("leadForm");
      const statusEl = document.getElementById("status");

      form.addEventListener("submit", async (e) => {
        e.preventDefault();

        statusEl.textContent = "Enviando...";

        const payload = {
          name: document.getElementById("name").value,
          phone: document.getElementById("phone").value,
          email: document.getElementById("email").value,
          area: document.getElementById("area").value,
          summary: document.getElementById("summary").value,
        };

        try {
          const res = await fetch("/api/leads", {
            method: "POST",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify(payload),
          });

          const data = await res.json();

          if (!res.ok) throw new Error(data.error);

          statusEl.style.color = "#22c55e";
          statusEl.textContent = "Enviado com sucesso!";
          form.reset();
        } catch (err) {
          statusEl.style.color = "#ef4444";
          statusEl.textContent = "Erro: " + err.message;
        }
      });
    </script>
  </body>
</html>
